import{a as j}from"./chunk-BUQFUJNT.js";import{a as k,b as p,c as D,d as I,e as R,f as U,g as G,j as A,k as q}from"./chunk-QQ5PLT2P.js";import{g as y,i as M,j as L,m as N}from"./chunk-H4444JOE.js";import{s as T}from"./chunk-Y2XIJCR6.js";import{k as E,r as P}from"./chunk-QTMV7BX7.js";import{Ab as g,Jb as C,Lb as v,Ra as l,Rb as w,Tb as a,Ub as h,_ as m,fa as F,ga as S,gb as _,na as f,r as x,sb as u,tb as d,xb as b,yb as i,zb as o}from"./chunk-IWYHIMNY.js";function V(t,n){if(t&1&&(i(0,"div",6),F(),i(1,"svg",20),g(2,"path",21),o(),S(),i(3,"span"),a(4),o()()),t&2){let r=v();l(4),h(r.errorMessage())}}function z(t,n){if(t&1&&(i(0,"span",12),a(1),o()),t&2){let r=v();l(),h(r.formUtils.getFieldError(r.loginForm,"email"))}}function H(t,n){if(t&1&&(i(0,"span",12),a(1),o()),t&2){let r=v();l(),h(r.formUtils.getFieldError(r.loginForm,"password"))}}function O(t,n){t&1&&(g(0,"span",22),a(1," Iniciando sesi\xF3n... "))}function J(t,n){t&1&&a(0," Iniciar Sesi\xF3n ")}var B=class t{fb=m(A);authService=m(T);router=m(M);loginForm;loginTrigger=f(null);loginResource=P({params:()=>this.loginTrigger(),stream:({params:n})=>n?this.authService.login(n.email,n.password):x(null)});formUtils=j;onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loading.set(!0),this.errorMessage.set(null);let{email:n,password:r}=this.loginForm.value;this.authService.login(n,r).subscribe({next:()=>{this.loading.set(!1),this.router.navigate(["/home"])},error:e=>{this.loading.set(!1),this.errorMessage.set(this.getErrorMessage(e.code))}})}route=m(y);loading=f(!1);errorMessage=f(null);returnUrl="/home";constructor(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/home"}getErrorMessage(n){switch(n){case"auth/user-not-found":return"Usuario no encontrado.";case"auth/wrong-password":return"Contrase\xF1a incorrecta.";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta m\xE1s tarde.";default:return"Error de autenticaci\xF3n. Intenta nuevamente."}}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=_({type:t,selectors:[["app-login-page"]],decls:33,vars:10,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-primary","to-secondary","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-primary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-6"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"block","text-red-500","text-sm","mt-1"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"divider"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/register",1,"link","link-primary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(r,e){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"\xA1Bienvenido!"),o(),i(6,"p",5),a(7,"Inicia sesi\xF3n para continuar"),o()(),u(8,V,5,1,"div",6),i(9,"form",7),C("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label",9)(12,"span",10),a(13,"Correo electr\xF3nico"),o()(),g(14,"input",11),u(15,z,2,1,"span",12),o(),i(16,"div",8)(17,"label",9)(18,"span",10),a(19,"Contrase\xF1a"),o()(),g(20,"input",13),u(21,H,2,1,"span",12),o(),i(22,"div",14)(23,"button",15),u(24,O,2,0)(25,J,1,0),o()()(),i(26,"div",16),a(27,"O"),o(),i(28,"div",17)(29,"p",18),a(30," \xBFNo tienes cuenta? "),i(31,"a",19),a(32," Reg\xEDstrate aqu\xED "),o()()()()()()),r&2){let s,c;l(8),d(e.loginResource.error()?8:-1),l(),b("formGroup",e.loginForm),l(5),w("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(),d((s=e.loginForm.get("email"))!=null&&s.invalid&&((s=e.loginForm.get("email"))!=null&&s.touched)?15:-1),l(5),w("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),d((c=e.loginForm.get("password"))!=null&&c.invalid&&((c=e.loginForm.get("password"))!=null&&c.touched)?21:-1),l(2),b("disabled",e.loading()||e.loginForm.invalid),l(),d(e.loading()?24:25)}},dependencies:[E,q,R,k,D,I,U,G,N,L],encapsulation:2})};export{B as LoginPage};
